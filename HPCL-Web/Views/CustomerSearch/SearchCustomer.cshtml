@model HPCL.Common.Models.ViewModel.CustomerSearch.BasicSearchModel
@using HPCL.Common.Resources

<div class="col-lg-12">
    <div class="bg-white p-2 p-md-4">
        <ul class="breadcrumb bread_custom bg-transparent m-0 pb-1 py-0 px-0">
            <li class="breadcrumb-item"><a href="#" class="text_primary">Search</a> </li>
            <li class="breadcrumb-item font-weight-light">Basic Search</li>
        </ul>

        <div class="w-100">
            <form>
                <div class="col-lg-12 col-md-12 col-12 pl-0 pr-0 mb-3">
                    <div class="border-1 rounded border-grey pb-0">
                        <p class="text_primary px-3 py-2 bg-grey m-0 font-weight-bold">Basic Search</p>
                        <div class="col-lg-12 col-md-12 col-12 py-3">
                            <div class="d-flex align-items-center flex-wrap">
                                <div class="offset-md-2 col-lg-8 col-12">
                                    <div class="d-flex align-items-center flex-wrap mb-3">
                                        <div class="col-md-12 col-12 pl-2">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1" checked="checked">
                                                <label class="form-check-label" for="inlineRadio1">Customer Search</label>
                                            </div>
                                             <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2">
                                            <label class="form-check-label" for="inlineRadio2">Card Search</label>
                                            </div>
                                           @*<div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio3" value="option3">
                                            <label class="form-check-label" for="inlineRadio3">Mobile Number</label>
                                            </div>*@
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex align-items-center flex-wrap">
                                <div class="col-lg-6 col-12">
                                    <div class="d-flex align-items-center flex-wrap mb-3">
                                        <label class="font-weight-normal col-md-4 col-12">Customer ID <sup class="text-danger">*</sup></label>
                                        <div class="col-md-7 col-12">
                                            <div class="custom_select">
                                                @Html.TextBoxFor(m => m.CustomerId, new { @class = "form-control",onkeypress = "return isNumberKey(event)",maxlength = "10" })

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-12">
                                    <div class="d-flex align-items-center flex-wrap mb-3">
                                        <label class="font-weight-normal offset-md-1 col-md-4 col-12">Form Number <sup class="text-danger">*</sup></label>
                                        <div class="col-md-7 col-12">
                                            <div class="custom_select">
                                                @Html.TextBoxFor(m => m.FormNumber, new { @class = "form-control",onkeypress = "return isNumberKey(event)",maxlength = "10"  })
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex align-items-center flex-wrap">

                                <div class="col-lg-6 col-12">
                                    <div class="d-flex align-items-center flex-wrap mb-3">
                                        <label class="font-weight-normal col-md-4 col-12">Name on Card <sup class="text-danger">*</sup></label>
                                        <div class="col-md-7 col-12">
                                            <div class="custom_select">
                                                @Html.TextBoxFor(m => m.NameonCard, new { @class = "form-control" })
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                 <div class="col-lg-6 col-12">
                                    <div class="d-flex align-items-center flex-wrap mb-3">
                                        <label class="font-weight-normal offset-md-1 col-md-4 col-12">Customer Name <sup class="text-danger">*</sup></label>
                                        <div class="col-md-7 col-12">
                                            <div class="custom_select">
                                                @Html.TextBoxFor(m => m.CustomerName, new { @class = "form-control" })
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-flex align-items-center flex-wrap">
                                <div class="col-lg-6 col-12">
                                    <div class="d-flex align-items-center flex-wrap mb-3">
                                        <label class="font-weight-normal col-md-4 col-12">State <sup class="text-danger">*</sup></label>
                                        <div class="col-md-7 col-12">
                                            <div class="custom_select">
                                                @*  <select name="zonalOffice" id="" class="form-control">
                                                <option selected="selected" value="-1">--Select--</option>
                                                <option value="">East Zone</option>
                                                <option value="">North Zone</option>
                                                </select>*@

                                                @Html.DropDownListFor(m => m.CommunicationStateId, new SelectList(Model.RetailOutletStates, "StateID", "StateName"), new { @class = "form-control" })

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-12">
                                    <div class="d-flex align-items-center flex-wrap mb-3">
                                        <label class="font-weight-normal offset-md-1 col-md-4 col-12">City <sup class="text-danger">*</sup></label>
                                        <div class="col-md-7 col-12">
                                            <div class="custom_select">
                                                @Html.TextBoxFor(m => m.CommunicationCityName, new { @class = "form-control" })
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex align-items-center flex-wrap">
                                <div class="col-lg-6 col-12">
                                    <div class="d-flex align-items-center flex-wrap mb-3">
                                        <label class="font-weight-normal col-md-4 col-12">Sort results by <sup class="text-danger">*</sup></label>
                                        <div class="col-md-7 col-12">
                                            <div class="custom_select">
                                                <select name="zonalOffice" id="" class="form-control">
                                                    <option selected="selected" value="-1">--Select--</option>
                                                    <option value="">Customer ID</option>
                                                    <option value="">Name on Card</option>
                                                    <option value="">Status</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <div class="d-flex align-items-center justify-content-center mt-0">
                                <div class="px-2">
                                    <button class="btn btn_primary" type="button" onclick="searchCustomer()">Search</button>
                                </div>
                                <div class="px-2">
                                    <button class="btn btn_primary" type="button">Reset</button>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>

            </form>
        </div>
    </div>
    <div class="col-lg-12 col-md-12 col-12 mt-3 toBeHiddenOnReset" id="searchCustomerTbl">
    </div>

    <div class="clearfix"></div>
</div>

<script type="text/javascript">

    $(document).ready(function() {

        document.getElementById("CustomerId").value = sessionStorage.getItem("textvalue");
        searchCustomer();

        //if (!sessionStorage.getItem("textvalue")) {
        //    sessionStorage.setItem("textvalue", '#MerchantId');
        //}
        // if (document.getElementById("MerchantId").value.length < 10) {
        //        document.getElementById("MerchantId_error").innerHTML = "invalid Merchant Id ";
        //        return (false);



        //}

        //     document.getElementById("MerchantId").value=  sessionStorage.getItem("textvalue");

        //if (document.getElementById("MerchantId").value.length > 10) {
        //    document.getElementById("MerchantId_error").innerHTML = "Only 10 Digits are allowed ";
        //    return (false);



        //} else {
        //     searchMerchant();

        //}



        //document.getElementById("MerchantId").value=  sessionStorage.getItem("textvalue");

        //   if (document.getElementById("MerchantId").value.length < 10) {
        //       document.getElementById("MerchantId_error").innerHTML = "invalid Merchant Id ";
        //       //return (false);



        //   } else {
        //        searchMerchant();

        //   }

        //console(merchantId)

        $('input[type=radio]').change(function() {
            window.location = '@Url.Action("ControlCardSearch", "ControlCard")';
        });
    });



    function searchCustomer() {



        //if (document.getElementById("MerchantId").value.length < 10) {
        //    document.getElementById("MerchantId_error").innerHTML = "invalid Merchant Id ";
        //    return (false);
        //}

        //if (document.getElementById("MerchantId").value.substring(0, 1) != "3") {



        //         document.getElementById("MerchantId_error").innerHTML = "invalid Merchant Id ";
        //         return (false);





        // }

        //if (document.getElementById("textsearch").value.length < 10) {
        //      document.getElementById("MerchantId_error").innerHTML = "invalid Merchant Id ";
        //      return (false);



        //  }

        //    $("#MerchantId").on("blur", function () {
        //    var merchantId = $("#MerchantId").val();
        //    if (merchantId != "") {
        //       if (!merchantId.match(mappedMerchantID)) {
        //           $("#merchantId_error").attr("style", "display:block");
        //           $("#merchantId_error").html("Please enter valid ID");

        //       }
        //       else{
        //           $("#merchantId_error").attr("style", "display:none");
        //           $("#merchantId_error").html("");
        //       }
        //    }
        //    else{
        //        $("#merchantId_error").attr("style", "display:block");
        //        $("#merchantId_error").html("ID is required");
        //    }
        //});

        //if (document.getElementById("MerchantId").value.length > 10) {
        //    document.getElementById("MerchantId_error").innerHTML = "Merchant Id should be 10 Digit ";
        //    return (false);

        //customerId, mobileNo, formNumber, nameonCard, CustomerName, communicationStateId, communicationCityName
        var customerId = $("#CustomerId").val();
        var mobileNo = $("#MobileNo").val();
        var formNumber = $("#FormNumber").val();
        var nameonCard = $("#NameonCard").val();
        var customerName = $("#CustomerName").val();
        var communicationStateId = $("#CommunicationStateId").val();
        var communicationCityName = $("#CommunicationCityName").val();

        $.ajax({
            type: 'GET',  // http method
            url: '@Url.Action("SearchCustomerDetails", "CustomerSearch")',
            contentType: "application/json; charset=utf-8",
            data: { customerId: customerId, mobileNo: mobileNo, formNumber: formNumber, nameonCard: nameonCard, customerName: customerName, communicationStateId: communicationStateId, communicationCityName: communicationCityName },
            dataType: "text",
            success: function(data, status, xhr) {
                var v = data;
                if (status == 'success') {
                    $("#searchCustomerTbl").html(data);
                    $('html, body').animate({
                        scrollTop: $("#searchCustomerTbl").offset().top
                    }, 2000);
                }
                else {
                    console.log(v);
                }
            },
            error: function(jqXhr, textStatus, errorMessage) {

                //document.applicationForm.SearchMerchantId.focus();
                alert("Error");
            }
        });
    }

    function resetMerchantSearch() {
        $(".toBeHiddenOnReset").html("");
    }

</script>