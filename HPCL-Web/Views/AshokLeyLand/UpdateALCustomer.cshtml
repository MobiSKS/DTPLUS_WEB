@model HPCL.Common.Models.ViewModel.AshokLeyLand.AshokLeylandCustomerUpdateModel
@{
    ViewData["Title"] = "Ashok Leyland Customer Updation";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="col-lg-12 p-4 p-md-4">
   <div class="bg-white p-2 p-md-4">
      <ul class="breadcrumb bread_custom bg-transparent m-0 pb-1 py-0 px-0">
         <li class="breadcrumb-item"><a href="@Url.Action("Index", "AshokLeyLand")" class="text_primary">Ashok Leyland</a> </li>
         <li class="breadcrumb-item font-weight-light">Ashok Leyland Customer Updation</li>
      </ul>
      @using (Html.BeginForm("UpdateALCustomer", "AshokLeyLand", FormMethod.Post, new { @enctype = "multipart/form-data" }))
      {
         <div class="w-100">
            <div class="col-lg-12 col-md-12 col-12 pl-0 pr-0">
               <div class="border-1 rounded border-grey">
                  <p class="text_primary px-3 py-2 bg-grey m-0 font-weight-bold">Ashok Leyland Customer Updation</p>
                  <div class="alert alert-danger mt-3 text-center ml-3 mr-3" id="dvRemarks" style="@(Model.Message=="" ? "display:none":"display:block")">
                     @Html.DisplayFor(m => m.Message)
                  </div>
                  <div class="col-lg-12 col-md-12 col-12 py-3">
                     <div class="d-flex align-items-center flex-wrap">
                        <div class="col-lg-12 col-12">
                           <div class="d-flex align-items-center flex-wrap mb-0">
                              <label class="font-weight-normal col-md-2 col-12">Customer ID  <sup class="text-danger">*</sup></label>
                              <div class="col-sm-3 col-md-3 col-12">
                                 <div class="custom_select">
                                    @Html.TextBoxFor(m => m.CustomerID, new { @class = "form-control", @id = "CustomerID", maxlength = "10", onkeypress = "return isNumberKey(event)" })
                                    @Html.ValidationMessageFor(m => m.CustomerID, "", new { @class = "error", @id = "CustomerIdValErrMsg" })
                                 </div>
                              </div>
                              <div class="col-md-7 col-12">
                                 <div class="d-flex align-items-center flex-wrap">
                                    <div class="px-2">
                                       <button class="btn btn_primary regrate_btn" type="button" onclick="ViewCustomerDetails()" id="btnSearch">Search</button>
                                    </div>
                                    <div class="px-2">
                                       <button class="btn btn_primary regrate_btn" type="button" id="btnReset">Reset</button>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="clearfix"></div>
                  </div>
                  <div class="clearfix"></div>
               </div>
            </div>
            <div class="clearfix"></div>
                <div id="dvNoData" style="display:none;" class="alert alert-danger mt-3 text-center ml-3 mr-3">
            </div>
            <div class="clearfix"></div>
            <div id="dvDetails" style="display:none">
               <div class="col-lg-12 col-md-12 col-12 pl-0 pr-0 mt-3">
                  <div class="border-1 rounded border-grey pb-0">
                     <p class="text_primary px-3 py-2 bg-grey m-0 font-weight-bold">Application Details</p>
                     <div class="col-lg-12 col-md-12 col-12 pt-3">
                        <div class="d-flex align-items-center flex-wrap">
                           <div class="col-lg-6 col-12">
                              <div class="d-flex align-items-center flex-wrap mb-3">
                                 <label class="font-weight-normal col-md-4 col-12">Customer/Org Name <sup class="text-danger">*</sup></label>
                                 <div class="col-md-8 col-12">
                                    <div class="row">
                                       <div class="col-md-4 col-12">
                                          <div class="custom_select">
                                            @Html.DropDownListFor(x => x.IndividualOrgNameTitle, new[]{
                                             new SelectListItem(){ Text = "Title", Value = "0" },
                                             new SelectListItem(){ Text = "Mr", Value = "Mr"},
                                             new SelectListItem(){ Text = "Ms", Value = "Ms"},
                                             new SelectListItem(){ Text = "M/s", Value = "M/s"},
                                             }, null, new { @class = "form-control px-0" })
                                          </div>
                                          <span class="error" id="salutaion_error"></span>
                                       </div>
                                       <div class="col-md-8 col-12 px-0">
                                          <div class="custom_select">
                                             @Html.TextBoxFor(m => m.IndividualOrgName, new { @class = "form-control", autocomplete = "off", maxlength = "50" })
                                          </div>
                                          <span class="error" id="IndividualOrgName_error"></span>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="col-lg-6 col-12">
                              <div class="d-flex align-items-center flex-wrap mb-3">
                                 <label class="font-weight-normal offset-md-1 col-md-4 col-12">Name On Card <sup class="text-danger">*</sup></label>
                                 <div class="col-md-7 col-12">
                                    <div class="custom_select">
                                       @Html.TextBoxFor(m => m.NameOnCard, new { @class = "form-control", autocomplete = "off", maxlength = "22" })
                                       <span class="error" id="nameOnCard_error"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="clearfix"></div>
                  </div>
               </div>
               <div class="col-lg-12 col-md-12 col-12 pl-0 pr-0 mt-3">
                  <div class="border-1 rounded border-grey pb-0">
                     <p class="text_primary px-3 py-2 bg-grey m-0 font-weight-bold">Communication Address</p>
                     <div class="col-lg-12 col-md-12 col-12 py-3">
                        <div class="d-flex align-items-center flex-wrap">
                           <div class="col-lg-6 col-12">
                              <div class="d-flex align-items-center flex-wrap mb-3">
                                 <label class="font-weight-normal col-md-4 col-12">City <sup class="text-danger">*</sup></label>
                                 <div class="col-md-7 col-12">
                                    <div class="custom_select">
                                       @Html.TextBoxFor(m => m.CommunicationCityName, new { @class = "form-control", autocomplete = "off", maxlength = "20" })
                                       <span class="error" id="communicationCityName_error"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="col-lg-6 col-12">
                              <div class="d-flex align-items-center flex-wrap mb-3">
                                 <label class="font-weight-normal offset-md-1 col-md-4 col-12">PIN Code <sup class="text-danger">*</sup></label>
                                 <div class="col-md-7 col-12">
                                    <div class="custom_select">
                                       @Html.TextBoxFor(m => m.CommunicationPincode, new { @class = "form-control", maxlength = "6", onkeypress = "return isNumberKey(event)", autocomplete = "off" })
                                       <span class="error" id="communicationPincode_error"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="d-flex align-items-center flex-wrap">
                           <div class="col-lg-6 col-12">
                              <div class="d-flex align-items-center flex-wrap mb-3">
                                 <label class="font-weight-normal col-md-4 col-12">State <sup class="text-danger">*</sup></label>
                                 <div class="col-md-7 col-12">
                                    <div class="custom_select">
                                       @Html.DropDownListFor(m => m.CommunicationStateId, new SelectList(Model.CustomerStateMdl, "StateID", "StateName"), new { @class = "form-control" })
                                       <span class="error" id="comm_states_error"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="col-lg-6 col-12">
                              <div class="d-flex align-items-center flex-wrap mb-3">
                                 <label class="font-weight-normal offset-md-1 col-md-4 col-12">District <sup class="text-danger">*</sup></label>
                                 <div class="col-md-7 col-12">
                                    <div class="custom_select">
                                       @Html.DropDownListFor(m => m.CommunicationDistrictId, new SelectList(Model.CommunicationDistrictMdl, "districtID", "districtName"), new { @class = "form-control" })
                                       <span class="error" id="comm_district_error"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                        @*<div class="d-flex align-items-center flex-wrap">
                           <div class="col-lg-6 col-12">
                              <div class="d-flex align-items-center flex-wrap mb-3">
                                 <label class="font-weight-normal col-md-4 col-12">Ph (Off) </label>
                                 <div class="col-md-7 col-12">
                                    <div class="row">
                                       <div class="col-4">
                                          @Html.TextBoxFor(m => m.CommunicationDialCode, new { @class = "form-control", maxlength = "4", onkeypress = "return isNumberKey(event)", autocomplete = "off" })
                                          <span class="error" id="CommunicationDialCode_error"></span>
                                       </div>
                                       <div class="col-8 pl-0">
                                          @Html.TextBoxFor(m => m.CommunicationPhonePart2, new { @class = "form-control", maxlength = "8", onkeypress = "return isNumberKey(event)", autocomplete = "off" })
                                          <span class="error" id="CommunicationPhonePart2_error"></span>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="col-lg-6 col-12">
                              <div class="d-flex align-items-center flex-wrap mb-3">
                                 <label class="font-weight-normal offset-md-1 col-md-4 col-12">Fax </label>
                                 <div class="col-md-7 col-12">
                                    <div class="row">
                                       <div class="col-4">
                                          @Html.TextBoxFor(m => m.CommunicationFaxCode, new { @class = "form-control", maxlength = "4", onkeypress = "return isNumberKey(event)", autocomplete = "off" })
                                          <span class="error" id="CommunicationFaxCode_error"></span>
                                       </div>
                                       <div class="col-8 pl-0">
                                          @Html.TextBoxFor(m => m.CommunicationFaxPart2, new { @class = "form-control", maxlength = "8", onkeypress = "return isNumberKey(event)", autocomplete = "off" })
                                          <span class="error" id="CommunicationFaxPart2_error"></span>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>*@
                        <div class="d-flex align-items-center flex-wrap">
                           <div class="col-lg-6 col-12">
                              <div class="d-flex align-items-center flex-wrap mb-3">
                                 <label class="font-weight-normal col-md-4 col-12">Mobile <sup class="text-danger">*</sup></label>
                                 <div class="col-md-7 col-12">
                                    <div class="custom_select">
                                       @Html.TextBoxFor(m => m.CommunicationMobileNo, new { @class = "form-control", maxlength = "10", onkeypress = "return isNumberKey(event)", autocomplete = "off" })
                                       <span class="error" id="comm_mobileNumber_error"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="col-lg-6 col-12">
                              <div class="d-flex align-items-center flex-wrap mb-3">
                                 <label class="font-weight-normal offset-md-1 col-md-4 col-12">Email <sup class="text-danger">*</sup></label>
                                 <div class="col-md-7 col-12">
                                    <div class="custom_select">
                                       @Html.TextBoxFor(m => m.CommunicationEmailid, new { @class = "form-control", autocomplete = "off", maxlength = "50" })
                                       <span class="error" id="comm_email_error"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="d-flex align-items-center flex-wrap">
                           <div class="col-lg-6 col-12">
                              <div class="d-flex align-items-center flex-wrap mb-3">
                                 <label class="font-weight-normal col-md-4 col-12">Address 1 <sup class="text-danger">*</sup></label>
                                 <div class="col-md-7 col-12">
                                    <div class="custom_select">
                                       @Html.TextBoxFor(m => m.CommunicationAddress1, new { @class = "form-control", autocomplete = "off", maxlength = "50" })
                                       <span class="error" id="comm_address1_error"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="col-lg-6 col-12">
                              <div class="d-flex align-items-center flex-wrap mb-3">
                                 <label class="font-weight-normal offset-md-1 col-md-4 col-12">Address 2 <sup class="text-danger">*</sup></label>
                                 <div class="col-md-7 col-12">
                                    <div class="custom_select">
                                       @Html.TextBoxFor(m => m.CommunicationAddress2, new { @class = "form-control", autocomplete = "off", maxlength = "50" })
                                       <span class="error" id="comm_address2_error"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="clearfix"></div>
                  </div>
               </div>
               <div class="col-lg-12 col-md-12 col-12 pl-0 pr-0 mt-3">
                  <div class="border-1 rounded border-grey pb-0">
                     <p class="text_primary px-3 py-2 bg-grey m-0 font-weight-bold">Dealer Details</p>
                     <div class="col-lg-12 col-md-12 col-12 pt-3">
                        <div class="d-flex align-items-center flex-wrap">
                           <div class="col-lg-6 col-12">
                              <div class="d-flex align-items-center flex-wrap mb-3">
                                 <label class="font-weight-normal col-md-4 col-12">Dealer Code <sup class="text-danger">*</sup></label>
                                 <div class="col-md-7 col-12">
                                    <div class="custom_select">
                                       @Html.TextBoxFor(m => m.DealerCode, new { @class = "form-control", maxlength = "25", autocomplete = "off", @readonly = "readonly" })
                                       <span class="error" id="DealerCode_error"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="col-lg-6 col-12">
                              <div class="d-flex align-items-center flex-wrap mb-3">
                                 <label class="font-weight-normal offset-md-1 col-md-5 col-12">Sales Executive Employee ID <sup class="text-danger">*</sup></label>
                                 <div class="col-md-6 col-12">
                                    <div class="custom_select">
                                       @Html.TextBoxFor(m => m.SalesExecutiveEmployeeID, new { @class = "form-control", maxlength = "25", autocomplete = "off", @readonly = "readonly" })
                                       <span class="error" id="SalesExecutiveEmployeeID_error"></span>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="clearfix"></div>
                  </div>
               </div>
               <div class="clearfix"></div>
               <div class="d-flex align-items-center justify-content-center mt-3">
                  <div class="px-2">
                     <button class="btn btn_primary" type="button" onclick="ViewCustomerDetails()">Back</button>
                  </div>
                  <div class="px-2">
                     <button class="btn btn_primary" type="submit" id="btnSubmit" onclick="return ValidateMandatoryFields()">Update</button>
                  </div>
               </div>
            </div>
         </div>
      }
      <div class="clearfix"></div>
   </div>
</div>
<div class="clearfix"></div>
<script>
$(document).ready(function () {

    if($("#dvRemarks").html().trim()!="")
    {
        console.log('Error Found From API');
        document.getElementById("dvDetails").style.display="block";
        document.getElementById("dvNoData").style.display = "none";
        document.getElementById("dvNoData").innerHTML="";
        $("#CustomerID").prop('readonly', true);
    }

});

$('#CustomerID').keypress(function (e) 
{
    if (e.keyCode == 13) // detect the enter key
    {  
        e.preventDefault();
        $('#btnSearch').click();
    }
});

 $('select').SumoSelect({
                placeholder: '--Select--',
                search: true,
                searchText: 'Enter Text here.'
            });

$("#CustomerID").on("blur", function () 
{
    debugger;
    if (document.getElementById("CustomerID").value.trim() == "") 
    {
        $("#CustomerIdValErrMsg").attr("style", "display:block");
        $("#CustomerIdValErrMsg").html("Please enter Customer ID");
        return false;
    }
    else if (!$("#CustomerID").val().match(mappedCustomerId)) 
    {
        $("#CustomerIdValErrMsg").attr("style", "display:block");
        $("#CustomerIdValErrMsg").html("Invalid Customer ID");
        return false;
    }
    else
    {
        $("#CustomerIdValErrMsg").html("");
    }

});

$("#btnReset").click(function ()
{
     window.location.href = '@Url.Action("UpdateALCustomer", "AshokLeyLand")';
});

 function ViewCustomerDetails()
 {
            debugger;
            if ($("#CustomerID").val().trim() == "")
            {
                $('#CustomerIdValErrMsg').html("Please enter Customer ID");
                return false;
            }
            else if (!$("#CustomerID").val().match(mappedCustomerId))
            {
                $("#CustomerIdValErrMsg").attr("style", "display:block");
                $("#CustomerIdValErrMsg").html("Invalid Customer ID");
                return false;
            }
            else
            {
               $('#CustomerIdValErrMsg').html("");
            }

            localStorage.setItem("DUPLICATEPANUSED", "1");

            $.ajax({
                url: "@Url.Action("GetCustomerAddress", "AshokLeyLand")",
                type: "POST",
                dataType: "JSON",
                data: { CustomerId: $("#CustomerID").val() },
                success: function (res)
                {
                    console.log("customer", res.customer);

                    if(res.customer.communicationAddress1!="")
                    {
                        document.getElementById("dvDetails").style.display="block";
                        document.getElementById("dvNoData").style.display = "none";
                        document.getElementById("dvNoData").innerHTML="";
                        $("#CustomerID").prop('readonly', true);

                        $('#CommunicationAddress1').val(res.customer.communicationAddress1);
                        $('#CommunicationAddress2').val(res.customer.communicationAddress2);
                        $('#CommunicationAddress3').val(res.customer.communicationAddress3);
                        $('#CommunicationLocation').val(res.customer.communicationLocation);
                        $('#CommunicationCityName').val(res.customer.communicationCityName);
                        $('#CommunicationPincode').val(res.customer.communicationPincode);
                        $('#IndividualOrgName').val(res.customer.individualOrgName);
                        $('#NameOnCard').val(res.customer.nameOnCard);
                        $('#DealerCode').val(res.customer.dealerCode);
                        $('#SalesExecutiveEmployeeID').val(res.customer.salesExecutiveEmployeeID);
                                                                                                                       

                        $('#CommunicationStateId')[0].sumo.selectItem(res.customer.casid);

                        //$('#CommunicationDialCode').val(res.customer.communicationDialCode);
                        //$('#CommunicationPhonePart2').val(res.customer.communicationPhonePart2);
                        //$('#CommunicationFaxCode').val(res.customer.communicationFaxCode);
                        //$('#CommunicationFaxPart2').val(res.customer.communicationFaxPart2);
                        $('#CommunicationMobileNo').val(res.customer.communicationMobileNo);
                        $('#CommunicationEmailid').val(res.customer.communicationEmailid);
                        console.log(res.customer.individualOrgNameTitle);
                        $('#IndividualOrgNameTitle')[0].sumo.selectItem(res.customer.individualOrgNameTitle);


                         $.ajax({
                            type: 'POST',  // http method
                            url: '@Url.Action("GetDistrictDetails", "Customer")',
                            data: { Stateid: res.customer.casid },  // data to submit
                            dataType: "json",
                            success: function (data, status, xhr) {
                                var v = data;
                                if (status == 'success')
                                {
                                    $("#CommunicationDistrictId").html("");
                                    $.each(data, function (i, data) { // bind the dropdown list using json result
                                        $('<option>',
                                            {
                                                value: data.districtID,
                                                text: data.districtName
                                            }).html(data.districtName).appendTo("#CommunicationDistrictId");
                                    });
                                    $("#CommunicationDistrictId")[0].sumo.reload();

                                    setTimeout(function(){
                                       $('#CommunicationDistrictId')[0].sumo.selectItem(res.customer.cadid);
                                       },500);
                                }
                                else {
                                    console.log(v);
                                }
                            },
                            error: function (jqXhr, textStatus, errorMessage) {
                                alert("Error Populating District Data");
                            }
                        });
                        document.getElementById("DealerCode").blur();
                    }
                    else
                    {
                        document.getElementById("dvDetails").style.display = "none";
                        document.getElementById("dvNoData").style.display = "block";
                        document.getElementById("dvNoData").innerHTML= res.customer.message;
                        $("#CustomerID").prop('readonly', false);
                    }

                },
                error: function (ex)
                {
                    alert('Failed' + ex);
                    document.getElementById("dvAddress").style.display = "none";
                    document.getElementById("dvNoData").style.display = "block";
                    document.getElementById("dvNoData").innerHTML= res.customer.message;
                }

            });
            clearValidations();
        };

function clearValidations()
{
    document.getElementById("CustomerIdValErrMsg").innerHTML="";
    document.getElementById("salutaion_error").innerHTML="";
    document.getElementById("IndividualOrgName_error").innerHTML="";
    document.getElementById("nameOnCard_error").innerHTML="";
    document.getElementById("communicationCityName_error").innerHTML="";
    document.getElementById("communicationPincode_error").innerHTML="";
    document.getElementById("comm_states_error").innerHTML="";
    document.getElementById("comm_district_error").innerHTML="";
    //document.getElementById("CommunicationDialCode_error").innerHTML="";
    //document.getElementById("CommunicationPhonePart2_error").innerHTML="";
    //document.getElementById("CommunicationFaxCode_error").innerHTML="";
    //document.getElementById("CommunicationFaxPart2_error").innerHTML="";
    document.getElementById("comm_mobileNumber_error").innerHTML="";
    document.getElementById("comm_email_error").innerHTML="";
    document.getElementById("comm_address1_error").innerHTML="";
    document.getElementById("comm_address2_error").innerHTML="";
    document.getElementById("DealerCode_error").innerHTML="";
    document.getElementById("SalesExecutiveEmployeeID_error").innerHTML="";

}
function ValidateMandatoryFields() 
    {
        debugger;

        var ret = true;

        if (document.getElementById("IndividualOrgNameTitle").value == "0") 
        {
            document.getElementById("salutaion_error").innerHTML = "Select Title";
            ret = false;
        }
        else 
        {
            document.getElementById("salutaion_error").innerHTML = "";
        }

        if (document.getElementById("IndividualOrgName").value.trim() == "") 
        {
            document.getElementById("IndividualOrgName_error").innerHTML = "Customer/Org.Name is required";
            ret = false;
        }
        else if (!isNaN(document.getElementById("IndividualOrgName").value.trim())) 
        {
            document.getElementById("IndividualOrgName_error").innerHTML = "Invalid Customer/Org.Name";
            ret = false;
        }
        else if (!document.getElementById("IndividualOrgName").value.match(nameWithSpaceCheck)) 
        {
            document.getElementById("IndividualOrgName_error").innerHTML = "Invalid Customer/Org.Name";
            ret = false;
        }
        else 
        {
            document.getElementById("IndividualOrgName_error").innerHTML = "";
        }

        if (document.getElementById("NameOnCard").value.trim() == "") 
        {
            document.getElementById("nameOnCard_error").innerHTML = "Name On Card field cannot be left blank";
            ret = false;
        }
        else if (!isNaN(document.getElementById("NameOnCard").value.trim())) 
        {
            document.getElementById("nameOnCard_error").innerHTML = "Invalid Name On Card";
            ret = false;
        }
        else if (!document.getElementById("NameOnCard").value.match(nameWithSpaceCheck)) 
        {
            document.getElementById("nameOnCard_error").innerHTML = "Invalid Name On Card";
            ret = false;
        }
        else 
        {
            document.getElementById("nameOnCard_error").innerHTML = "";
        }

        if (document.getElementById("CommunicationCityName").value.trim() == "") 
        {
            document.getElementById("communicationCityName_error").innerHTML = "City field cannot be left blank";
            ret = false;
        }
        else if (!document.getElementById("CommunicationCityName").value.match(atLeastOneAlphabet)) 
        {
            document.getElementById("communicationCityName_error").innerHTML = "Invalid City Name";
            ret = false;
        }
        else 
        {
            document.getElementById("communicationCityName_error").innerHTML = "";
        }

        if (document.getElementById("CommunicationPincode").value.trim() == "") 
        {
            document.getElementById("communicationPincode_error").innerHTML = "Pin Code is required";
            ret = false;
        }
        else
        {
            var pin = document.getElementById("CommunicationPincode").value.trim();
            if (pin.substring(0, 1) == "0") 
            {
                document.getElementById("communicationPincode_error").innerHTML = "Invalid Pin Code. Min-Max 6 digits";
                ret = false;
            }
            else if (pin.length < 6) 
            {
                document.getElementById("communicationPincode_error").innerHTML = "Invalid Pin Code. Min-Max 6 digits";
                ret = false;
            }
            else if (!pin.match(pincode)) 
            {
                document.getElementById("communicationPincode_error").innerHTML = "Invalid Pin Code. Min-Max 6 digits";
                ret = false;
            }
            else 
            {
                document.getElementById("communicationPincode_error").innerHTML = "";
            }
        }


        if (document.getElementById("CommunicationStateId").value == "0") {
            document.getElementById("comm_states_error").innerHTML = "State is required";
            ret = false;
        }
        else {
            document.getElementById("comm_states_error").innerHTML = "";
        }

        if (document.getElementById("CommunicationDistrictId").value == "0") {
            document.getElementById("comm_district_error").innerHTML = "District is required";
            ret = false;
        }
        else {
            document.getElementById("comm_district_error").innerHTML = "";
        }

        //var stdCode = document.getElementById("CommunicationDialCode").value.trim();
        //if (stdCode != "") 
        //{

        //    if (stdCode.length < 2 || stdCode.length > 4) 
        //    {
        //        document.getElementById("CommunicationDialCode_error").innerHTML = "Invalid Code";
        //        ret = false;
        //    }
        //    else if (!stdCode.match(number))
        //    {
        //        document.getElementById("CommunicationDialCode_error").innerHTML = "Invalid Code";
        //        ret = false;
        //    }
        //    else 
        //    {
        //        document.getElementById("CommunicationDialCode_error").innerHTML = "";
        //    }
        //}
        //else 
        //{
        //    document.getElementById("CommunicationDialCode_error").innerHTML = "";
        //}

        //var phno = document.getElementById("CommunicationPhonePart2").value.trim();
        //if (phno != "") 
        //{
        //    if (phno.charAt(0) == "0") 
        //    {
        //        document.getElementById("CommunicationPhonePart2_error").innerHTML = "Invalid Phone Number";
        //        ret = false;
        //    }
        //    else if (phno.length < 6 || phno.length > 8) 
        //    {
        //        document.getElementById("CommunicationPhonePart2_error").innerHTML = "Invalid Phone Number";
        //        ret = false;
        //    }
        //    else if (!phno.match(number))
        //    {
        //        document.getElementById("CommunicationPhonePart2_error").innerHTML = "Invalid Phone Number";
        //        ret = false;
        //    }
        //    else 
        //    {
        //        document.getElementById("CommunicationPhonePart2_error").innerHTML = "";
        //    }
        //}
        //else 
        //{
        //    document.getElementById("CommunicationPhonePart2_error").innerHTML = "";
        //}


        //var faxCode = document.getElementById("CommunicationFaxCode").value.trim();
        //if (faxCode != "") 
        //{

        //    if (faxCode.length < 2 || faxCode.length > 4) 
        //    {
        //        document.getElementById("CommunicationFaxCode_error").innerHTML = "Invalid Code";
        //        ret = false;
        //    }
        //    else if(!faxCode.match(number))
        //    {
        //        document.getElementById("CommunicationFaxCode_error").innerHTML = "Invalid Code";
        //        ret = false;
        //    }
        //    else 
        //    {
        //        document.getElementById("CommunicationFaxCode_error").innerHTML = "";
        //    }
        //}
        //else 
        //{
        //    document.getElementById("CommunicationFaxCode_error").innerHTML = "";
        //}

        //var faxphno = document.getElementById("CommunicationFaxPart2").value.trim();
        //if (faxphno != "") 
        //{
        //    if (phno.charAt(0) == "0") 
        //    {
        //        document.getElementById("CommunicationFaxPart2_error").innerHTML = "Invalid Fax Number";
        //        ret = false;
        //    }
        //    else if (faxphno.length < 6 || faxphno.length > 8) 
        //    {
        //        document.getElementById("CommunicationFaxPart2_error").innerHTML = "Invalid Fax Number";
        //        ret = false;
        //    }
        //    else if (!faxphno.match(number))
        //    {
        //        document.getElementById("CommunicationFaxPart2_error").innerHTML = "Invalid Fax Number";
        //        ret = false;
        //    }
        //    else 
        //    {
        //        document.getElementById("CommunicationFaxPart2_error").innerHTML = "";
        //    }
        //}
        //else 
        //{
        //    document.getElementById("CommunicationFaxPart2_error").innerHTML = "";
        //}


        if (document.getElementById("CommunicationMobileNo").value.trim() == "") 
        {
            document.getElementById("comm_mobileNumber_error").innerHTML = "Mobile Number cannot be left blank";
            ret = false;
        }
        else if (document.getElementById("CommunicationMobileNo").value.substring(0, 1) == "0") 
        {
            document.getElementById("comm_mobileNumber_error").innerHTML = "Invalid Mobile Number. Min-Max 10 digits";
            ret = false;
        }
        else if (document.getElementById("CommunicationMobileNo").value.length < 10) 
        {
            document.getElementById("comm_mobileNumber_error").innerHTML = "Invalid Mobile Number. Min-Max 10 digits";
            ret = false;
        }
        else if(!document.getElementById("CommunicationMobileNo").value.match(phoneno)) 
        {
            document.getElementById("comm_mobileNumber_error").innerHTML = "Invalid Mobile Number. Min-Max 10 digits";
            ret = false;
        }
        else 
        {
            document.getElementById("comm_mobileNumber_error").innerHTML = "";
        }

        if (document.getElementById("CommunicationEmailid").value.trim() == "") 
        {
            document.getElementById("comm_email_error").innerHTML = "Email cannot be left blank";
            ret = false;
        }
        else if (!document.getElementById("CommunicationEmailid").value.trim().match(email)) 
        {
            document.getElementById("comm_email_error").innerHTML = "Invalid email id (e.g.: abc@gmail.com)";
            ret = false;
        }
        else 
        {
            document.getElementById("comm_email_error").innerHTML = "";
        }

        if (document.getElementById("CommunicationAddress1").value.trim() == "") 
        {
            document.getElementById("comm_address1_error").innerHTML = "Address field cannot be left blank";
            ret = false;
        }
        else if (!document.getElementById("CommunicationAddress1").value.match(atLeastOneAlphabet)) 
        {
            document.getElementById("comm_address1_error").innerHTML = "Invalid Address";
            ret = false;
        }
        else 
        {
            document.getElementById("comm_address1_error").innerHTML = "";
        }

        if (document.getElementById("CommunicationAddress2").value.trim() == "") 
        {
            document.getElementById("comm_address2_error").innerHTML = "Address field cannot be left blank";
            ret = false;
        }
        else if (!document.getElementById("CommunicationAddress2").value.match(atLeastOneAlphabet)) 
        {
            document.getElementById("comm_address2_error").innerHTML = "Invalid Address";
            ret = false;
        }
        else 
        {
            document.getElementById("comm_address2_error").innerHTML = "";
        }

        if (document.getElementById('DealerCode').value.trim() == "") 
        {
            document.getElementById("DealerCode_error").innerHTML = "Dealer Code is required";
            ret = false;
        }
        else 
        {
            if (localStorage.getItem("DEALERFOUND") == 0) 
            {
             document.getElementById("DealerCode_error").innerHTML = "Invalid Dealer Code";
             ret = false;
            }
            else 
            {
                document.getElementById("DealerCode_error").innerHTML = "";
            }
        }
        
        if (document.getElementById('SalesExecutiveEmployeeID').value.trim() == "") 
        {
            document.getElementById("SalesExecutiveEmployeeID_error").innerHTML = "Sales Executive Employee ID is required";
            ret = false;
        }
        else 
        {
            document.getElementById("SalesExecutiveEmployeeID_error").innerHTML = "";
        }

        return ret;
    }

        $("#CommunicationMobileNo").on("blur", function () {
        //debugger;
        var communicationMobile = document.getElementById("CommunicationMobileNo").value;
        if (communicationMobile == "") 
        {
            document.getElementById("comm_mobileNumber_error").innerHTML = "Mobile Number cannot be left blank";
            return (false);
        }
        else if (document.getElementById("CommunicationMobileNo").value.substring(0, 1) == "0") 
        {
            document.getElementById("comm_mobileNumber_error").innerHTML = "Invalid Mobile Number. Min-Max 10 digits";
            return false;
        }
        else if (document.getElementById("CommunicationMobileNo").value.length < 10) 
        {
            document.getElementById("comm_mobileNumber_error").innerHTML = "Invalid Mobile Number. Min-Max 10 digits";
            return false;
        }
        else if(!document.getElementById("CommunicationMobileNo").value.match(phoneno)) 
        {
            document.getElementById("comm_mobileNumber_error").innerHTML = "Invalid Mobile Number. Min-Max 10 digits";
            return false;
        }
        else 
        {
            document.getElementById("comm_mobileNumber_error").innerHTML = "";
        }

        var mobileNoUsed = false;
        localStorage.setItem("MOBILENUMBERREADYUSED", "1");

    });

    $("#CommunicationEmailid").on("blur", function () {
        //debugger;
        var communicationEmail = document.getElementById("CommunicationEmailid").value;
        if (communicationEmail == "") {
            document.getElementById("comm_email_error").innerHTML = "Email cannot be left blank";
            return (false);
        }
        else {
            document.getElementById("comm_email_error").innerHTML = "";
        }

        if (communicationEmail.match(email)) {
            document.getElementById("comm_email_error").innerHTML = "";
        }
        else {
            document.getElementById("comm_email_error").innerHTML = "Invalid email id (e.g.: abc@gmail.com)";
            return (false);
        }

        var emailUsed = false;
        localStorage.setItem("EMAILIDALREADYUSED", "1");

    });

    $("#DealerCode").on("blur", function () 
    {
        debugger;
        localStorage.setItem("DEALERFOUND", "0");

        var dealerCode = document.getElementById("DealerCode").value.trim();
        if (dealerCode == "") 
        {
            document.getElementById("DealerCode_error").innerHTML = "Dealer Code is required";
            document.getElementById("SalesExecutiveEmployeeID").value="";
            document.getElementById("SalesExecutiveEmployeeID_error").innerHTML = ""
            return (false);
        }
        else 
        {
            document.getElementById("DealerCode_error").innerHTML = "";
        }

        document.getElementById("SalesExecutiveEmployeeID_error").innerHTML = ""

        $.ajax({
            type: 'POST',  // http method
            url: '@Url.Action("CheckDealerCodeIsValid", "Common")',
            data: { DealerCode: dealerCode },  // data to submit
            dataType: "json",
            success: function (data, status, xhr) {
                console.log(data);
                console.log(status);
                console.log(data.status);

                if (status == 'success') 
                {
                    if (data.status == 1) 
                    {
                        document.getElementById("DealerCode_error").innerHTML = "";
                        localStorage.setItem("DEALERFOUND", "1");

                        $.ajax({
                            type: 'POST',  // http method
                            url: '@Url.Action("GetAlSalesExeEmpIdAddOnOTCCardMapping", "AshokLeyLand")',
                            data: { dealerCode: dealerCode },  // data to submit
                            dataType: "json",
                            success: function (data, status, xhr) {
                                console.log(data);
                                console.log(status);
                                if (status == 'success') 
                                {
                                    document.getElementById("SalesExecutiveEmployeeID").value = data.salesExecutiveEmployeeID;
  
                                    if(data.statusCode==1000)
                                    {
                                        document.getElementById("SalesExecutiveEmployeeID").value = data.salesExecutiveEmployeeID;
                                        document.getElementById("DealerCode_error").innerHTML ="";
                                    }
                                    else
                                    {
                                        document.getElementById("DealerCode_error").innerHTML = data.reason;
                                        document.getElementById("SalesExecutiveEmployeeID").value = "";
                                    }

                                    if (data == "Failed to load Customer Details")
                                        document.getElementById("SalesExecutiveEmployeeID").value = "";
                                }
                                else 
                                {
                                    $("#DealerCode_error").html("");
                                    document.getElementById("SalesExecutiveEmployeeID").value = "";
                                }
                            },
                            error: function (xhr, ajaxOptions, thrownError) 
                            {
                                document.getElementById("SalesExecutiveEmployeeID").value = "";
                            },
                            statusCode: 
                            {
                                1024: function () 
                                {
                                    document.getElementById("SalesExecutiveEmployeeID").value = "";
                                }
                            }
                        });


                    }
                    else 
                    {
                        document.getElementById("DealerCode_error").innerHTML = "Invalid Dealer Code";
                        localStorage.setItem("DEALERFOUND", "0");
                    }

                    if (data == "Failed to load Dealer Details") {
                        document.getElementById("DealerCode_error").innerHTML = "Invalid Dealer Code";
                        localStorage.setItem("DEALERFOUND", "0");
                    }
                }
                else 
                {
                    document.getElementById("DealerCode_error").innerHTML = "Invalid Dealer Code";
                    localStorage.setItem("DEALERFOUND", "0");
                }
            },
            error: function (xhr, ajaxOptions, thrownError) 
            {
                document.getElementById("DealerCode_error").innerHTML = "Invalid Dealer Code";
                localStorage.setItem("DEALERFOUND", "0");
            },
            statusCode: 
            {
                1024: function () {
                    document.getElementById("DealerCode_error").innerHTML = "Invalid Dealer Code";
                    localStorage.setItem("DEALERFOUND", "0");
                }
            }
        });


    });

    $("#CommunicationPincode").on("blur", function () 
    {
        debugger;
        var pinCode = document.getElementById("CommunicationPincode").value.trim();
        if (pinCode == "") {
            document.getElementById("communicationPincode_error").innerHTML = "Pin Code is required";
            return (false);
        }
        else if (document.getElementById("CommunicationPincode").value.substring(0, 1) == "0") 
        {
            document.getElementById("communicationPincode_error").innerHTML = "Invalid Pin Code. Min-Max 6 digits";
            return false;
        }
        else if (document.getElementById("CommunicationPincode").value.length < 6) 
        {
            document.getElementById("communicationPincode_error").innerHTML = "Invalid Pin Code. Min-Max 6 digits";
            return false;
        }
        else if (!document.getElementById("CommunicationPincode").value.match(pincode)) 
        {
            document.getElementById("communicationPincode_error").innerHTML = "Invalid Pin Code. Min-Max 6 digits";
            return false;
        }
        else 
        {
            document.getElementById("communicationPincode_error").innerHTML = "";
        }
    });

       $("#IndividualOrgName").on("blur", function () {
        //debugger;
        var individualOrgName = document.getElementById("IndividualOrgName").value.trim();
        if (individualOrgName == "") {
            document.getElementById("IndividualOrgName_error").innerHTML = "Customer/Org.Name is required";
            return (false);
        }
        else {
             document.getElementById("IndividualOrgName_error").innerHTML = "";
        }

         if (!isNaN(individualOrgName)) {
                document.getElementById("IndividualOrgName_error").innerHTML = "Invalid Customer/Org.Name";
                return false;
             }
            else {
                document.getElementById("IndividualOrgName_error").innerHTML = "";
            }

        if (!individualOrgName.match(nameWithSpaceCheck)) {
            document.getElementById("IndividualOrgName_error").innerHTML = "Invalid Customer/Org.Name";
            return false;
        }
        else {
            document.getElementById("IndividualOrgName_error").innerHTML = "";
        }
    });

    $("#NameOnCard").on("blur", function () {
        //debugger;
        var nameOnCard = document.getElementById("NameOnCard").value.trim();
        if (nameOnCard == "") {
            document.getElementById("nameOnCard_error").innerHTML = "Name On Card field cannot be left blank";
            return (false);
        }
        else {
            document.getElementById("nameOnCard_error").innerHTML = "";
        }

        if (!isNaN(document.getElementById("NameOnCard").value.trim())) {
            document.getElementById("nameOnCard_error").innerHTML = "Invalid Name On Card";
            return false;
        }
        else {
            document.getElementById("nameOnCard_error").innerHTML = "";
        }

        if (!document.getElementById("NameOnCard").value.match(nameWithSpaceCheck)) {
            document.getElementById("nameOnCard_error").innerHTML = "Invalid Name On Card";
            return false;
        }
        else {
            document.getElementById("nameOnCard_error").innerHTML = "";
        }
    });

    $("#CommunicationCityName").on("blur", function () {
        //debugger;
        var cityName = document.getElementById("CommunicationCityName").value.trim();
        if (cityName == "") {
            document.getElementById("communicationCityName_error").innerHTML = "City field cannot be left blank";
            return (false);
        }
        else {
            document.getElementById("communicationCityName_error").innerHTML = "";
        }

        if (!isNaN(document.getElementById("CommunicationCityName").value.trim())) {
            document.getElementById("communicationCityName_error").innerHTML = "Invalid City Name";
            return false;
        }
        else {
            document.getElementById("communicationCityName_error").innerHTML = "";
        }

        if (!document.getElementById("CommunicationCityName").value.match(nameWithSpaceCheck)) {
            document.getElementById("communicationCityName_error").innerHTML = "Invalid City Name";
            return false;
        }
        else {
            document.getElementById("communicationCityName_error").innerHTML = "";
        }

    });

    $("#CommunicationAddress1").on("blur", function () {
        //debugger;
        var address = document.getElementById("CommunicationAddress1").value.trim();
        if (address == "") {
            document.getElementById("comm_address1_error").innerHTML = "Address field cannot be left blank";
            return (false);
        }
        else {
            if (!isNaN(document.getElementById("CommunicationAddress1").value.trim())) {
                document.getElementById("comm_address1_error").innerHTML = "Invalid Address";
                return false;
            }
            else {
                document.getElementById("comm_address1_error").innerHTML = "";
            }

            if (address.match(atLeastOneAlphabet)) {
                document.getElementById("comm_address1_error").innerHTML = "";
            }
            else {
                document.getElementById("comm_address1_error").innerHTML = "Invalid Address";
                return (false);
            }
        }     

    });

    $("#CommunicationAddress2").on("blur", function () {
        //debugger;
        var address = document.getElementById("CommunicationAddress2").value.trim();
        if (address == "") {
            document.getElementById("comm_address2_error").innerHTML = "Address field cannot be left blank";
            return (false);
        }
        else {
            if (!isNaN(document.getElementById("CommunicationAddress2").value.trim())) {
                document.getElementById("comm_address2_error").innerHTML = "Invalid Address";
                return false;
            }
            else {
                document.getElementById("comm_address2_error").innerHTML = "";
            }

            if (address.match(atLeastOneAlphabet)) {
                document.getElementById("comm_address2_error").innerHTML = "";
            }
            else {
                document.getElementById("comm_address2_error").innerHTML = "Invalid Address";
                return (false);
            }
        }       

    });

    $("#CommunicationDistrictId").change(function () {
        var id = this.value;

        if (id != 0) {
            $("#comm_district_error").html("");
        }
    });

    $("#IndividualOrgNameTitle").change(function () {
        var id = this.value;

        if (id != 0) {
            $("#salutaion_error").html("");
        }
    });

     $('#NoOfCards').on("cut copy paste",function(e) {
          e.preventDefault();
        });

    $("#SalesExecutiveEmployeeID").on("blur", function () {
        //debugger;
        if (document.getElementById('SalesExecutiveEmployeeID').value.trim() == "") 
        {
            document.getElementById("SalesExecutiveEmployeeID_error").innerHTML = "Sales Executive Employee ID is required";
            ret = false;
        }
        else 
        {
            document.getElementById("SalesExecutiveEmployeeID_error").innerHTML = "";
        }      

    });

     //$("#CommunicationDialCode").on("blur", function ()
     //   {
     //       //debugger;
     //       var stdCode = document.getElementById("CommunicationDialCode").value.trim();
     //       if (stdCode != "")
     //       {

     //           if (stdCode.length < 2 || stdCode.length > 4)
     //           {
     //               document.getElementById("CommunicationDialCode_error").innerHTML = "Invalid Code";
     //               return false;
     //           }
     //           else
     //           {
     //               if (!stdCode.match(number))
     //               {
     //                   document.getElementById("CommunicationDialCode_error").innerHTML = "Invalid Code";
     //                   return false;
     //               }
     //               else
     //               {
     //                   document.getElementById("CommunicationDialCode_error").innerHTML = "";
     //               }
     //           }
     //       }
     //       else
     //       {
     //           document.getElementById("CommunicationDialCode_error").innerHTML = "";
     //       }

     // });

     // $("#CommunicationPhonePart2").on("blur", function ()
     //  {
     //       //debugger;
     //       var phno = document.getElementById("CommunicationPhonePart2").value.trim();
     //       if (phno != "")
     //       {
     //           if (phno.charAt(0) == "0")
     //           {
     //               document.getElementById("CommunicationPhonePart2_error").innerHTML = "Invalid Phone Number";
     //               return false;
     //           }
     //           else if (phno.length < 6 || phno.length > 8)
     //           {
     //               document.getElementById("CommunicationPhonePart2_error").innerHTML = "Invalid Phone Number";
     //               return false;
     //           }
     //           else
     //           {
     //               if (!phno.match(number))
     //               {
     //                   document.getElementById("CommunicationPhonePart2_error").innerHTML = "Invalid Phone Number";
     //                   return false;
     //               }
     //               else
     //               {
     //                   document.getElementById("CommunicationPhonePart2_error").innerHTML = "";
     //               }
     //           }

     //       }
     //       else
     //       {
     //           document.getElementById("CommunicationPhonePart2_error").innerHTML = "";
     //       }

     // });

     // $("#CommunicationFaxCode").on("blur", function ()
     //  {
     //       //debugger;
     //   var faxCode = document.getElementById("CommunicationFaxCode").value.trim();
     //   if (faxCode != "") {
     //       if (faxCode.length < 2 || faxCode.length > 4) {
     //           document.getElementById("CommunicationFaxCode_error").innerHTML = "Invalid Code";
     //           return false;
     //       }
     //       else
     //       {
     //           if (!faxCode.match(number))
     //           {
     //               document.getElementById("CommunicationFaxCode_error").innerHTML = "Invalid Code";
     //               return false;
     //           }
     //           else {
     //               document.getElementById("CommunicationFaxCode_error").innerHTML = "";
     //           }
     //       }

     //   }
     //   else {
     //       document.getElementById("CommunicationFaxCode_error").innerHTML = "";
     //   }

     // });

     // $("#CommunicationFaxPart2").on("blur", function ()
     // {
     //       //debugger;
     //   var faxphno = document.getElementById("CommunicationFaxPart2").value.trim();
     //   if (faxphno != "") {
     //       if (faxphno.charAt(0) == "0") {
     //           document.getElementById("CommunicationFaxPart2_error").innerHTML = "Invalid Fax Number";
     //           return false;
     //       }
     //       else if (faxphno.length < 6 || faxphno.length > 8) {
     //           document.getElementById("CommunicationFaxPart2_error").innerHTML = "Invalid Fax Number";
     //           return false;
     //       }
     //       else
     //       {
     //           if (!faxphno.match(number))
     //           {
     //               document.getElementById("CommunicationFaxPart2_error").innerHTML = "Invalid Fax Number";
     //               return false;
     //           }
     //           else
     //           {
     //               document.getElementById("CommunicationFaxPart2_error").innerHTML = "";
     //           }
     //       }

     //   }
     //   else
     //   {
     //       document.getElementById("CommunicationFaxPart2_error").innerHTML = "";
     //   }

     // });

      $("#CommunicationStateId").change(function () {
        var id = this.value;

        if (id != 0) {
            $("#comm_states_error").html("");
        }

        $.ajax({
            type: 'POST',  // http method
            url: '@Url.Action("GetDistrictDetails", "Customer")',
            data: { Stateid: id },  // data to submit
            dataType: "json",
            success: function (data, status, xhr) {
                var v = data;
                if (status == 'success') {
                    $("#CommunicationDistrictId").html("");
                    $.each(data, function (i, data) { // bind the dropdown list using json result
                        $('<option>',
                            {
                                value: data.districtID,
                                text: data.districtName
                            }).html(data.districtName).appendTo("#CommunicationDistrictId");
                            $("#CommunicationDistrictId")[0].sumo.reload(); 
                    });
                }
                else {
                    console.log(v);
                }
            },
            error: function (jqXhr, textStatus, errorMessage) {
                alert("Error Populating District Data");
            }
        });
    });

</script>